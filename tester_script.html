<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title> TESTER </title>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<script src="AutoTickBoxer.js"></script>
</head>
<style type="text/css">
.control {padding: 6px; font-size:14px;}
.control label {
  display: block;
  clear: both;
}
.control button { border: outset 2px; }
.control button.active { border: inset 2px; }


</style>
<body>
<div><div>
</body>
<script>
var originalData = [];
var excludeColumns = ["source", "target", "value"];
var divId = "body";
var atb;
var dataPath = "sankey_data.csv"

var dataRead = new Promise(function(resolve, reject){
  d3.csv(dataPath, function(error, data) {
    
    if(error) reject(error);

    data.forEach(function (d){
      originalData.push(
        {
        "year": d.year,
        "offence_type": d.offence_type,
        "offence_group": d.offence_group,
        "source": d.source,
        "target": d.target,
        "value": +d.value
        })
    });
    resolve();
  });
});

dataRead.then(function(e){
	atb = new AutoTickBoxer(excludeColumns, divId, originalData);
	atb.generateTickboxes();
});


</script>
</html>